---
output:
  md_document:
    variant: markdown_github
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# About the `clusteredinterference` package

This package implements the estimator proposed in Barkley et al. (in preparation), _Causal Inference from Observational Studies with Clustered Interference_. 

A version of this manuscript is available [on arXiv at 1711.04834](https://arxiv.org/abs/1711.04834).



## About the method

Barkley et al. (201X) propose new causal estimands for defining treatment effects in the context of observational studies when there may be interference or spillover effects between units in the same cluster. The manuscript also introduces IPTW estimators for thos estimands, which are implemented in `clusteredinterference`.

# Using the `clusteredinterference` package

## Install the package

You'll need to use the `devtools` package to install \href{https://github.com/BarkleyBG/clusteredinterference}{from GitHub}:

```{r, eval = FALSE}
devtools::install_github("BarkleyBG/clusteredinterference")
```

### Architectures supported

This package has been checked on several operating systems with \href{https://github.com/r-hub/rhub}{`rhub`} package. 

| Platform  | Latest succesful check |
| ----- | -----|
|macOS 10.11 El Capitan, R-release (experimental)| v0.3.0 |
|Windows Server 2008 R2 SP1, R-release, 32/64 bit | v0.3.0|


## Load this package 

```{r}
library(clusteredinterference)
```

## A quick data example

```{r} 
data("toy_data")
head(toy_data)
```

## Estimation

Estimation is carried out with one function:

```{r} 
set.seed(1113)
causal_fx <- policyFX(
  data = toy_data,
  formula = Outcome | Treatment ~ Age + Distance + (1 | Cluster_ID) | Cluster_ID,
  alphas = c(.15, .25), 
  k_samps = 1
)
```


```{r}
knitr::kable(causal_fx$estimates, digits = 3)
```

## Vignette

The vignette provides more information on the formal arguments:

```{r, eval = FALSE}
browseVignettes("clusteredinterference")
```


## News and version history

A changelog is found in the `NEWS.md` file. Version history is also tracked by the [release tags](https://github.com/BarkleyBG/clusteredinterference/releases) for this GitHub repo.


## Acknowledgments

- Please see the [`inferference`](https://cran.r-project.org/package=inferference) package for related estimators from the following articles:
    - Perez-Heydrich, C., Hudgens, M. G., Halloran, M. E., Clemens, J. D., Ali, M. and Emch, M. E. (2014), _Assessing effects of cholera vaccination in the presence of interference_. Biometrics, 70: 731â€“741. [doi: 10.1111/biom.12184](doi.wiley.com/10.1111/biom.12184)
    - Eric J Tchetgen Tchetgen, Tyler J VanderWeele (2014),  _On causal inference in the presence of interference_. Statistical Methods in Medical Research. Vol 21, Issue 1, pp. 55 - 75 [doi: 10.1177/0962280210386779](https://doi.org/10.1177/0962280210386779)  
- An earlier version of the methods implemented in `clusteredinterference` was implemented using the [`geex`](https://github.com/bsaul/geex) package for estimating equations.
- Thanks to [Bradley Saul](https://github.com/bsaul) for `inferference`, `geex`, and for comments and suggestions that were helpful in the creation of `clusteredinterference`.
